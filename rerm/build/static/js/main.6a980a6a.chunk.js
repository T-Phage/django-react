(this.webpackJsonprerm=this.webpackJsonprerm||[]).push([[0],{22:function(e,t,a){},40:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(32),o=a.n(c),r=(a(22),a(10)),i=a(11),l=a(13),h=a(12),d=(a(39),a(40),a(5)),j=a(3),u=a(15),b=a(2),m=a(4),p=a(0),O=function(e){e.handleClose;var t=e.show,a=e.children,n=t?"modal display-block":"modal display-none";return Object(p.jsx)("div",{className:n,children:Object(p.jsx)("section",{className:"modal-main",children:a})})},g=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!0}))},n.hideModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!1}))},n.state={show:!1,currentuser:[],longindetails:{}},n.getCurentUser=n.getCurentUser.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCurentUser()}},{key:"getCurentUser",value:function(){var e=this;fetch("https://testingmyapis.herokuapp.com/api/active/user/",{method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"JWT "+localStorage.getItem("access_token")}}).then((function(e){return e.json()})).then((function(t){"token_not_valid"===t.code?e.showModal():e.setState(Object(b.a)(Object(b.a)({},e.state.currentuser),{},{currentuser:[t]}))})).catch((function(e){}))}},{key:"render",value:function(){var e=this.state.currentuser;return Object(p.jsx)("div",{children:e.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{style:{textAlign:"center"},children:"User Profile"}),Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("img",{src:e.userimage,alt:"img",style:{width:"100%"}}),Object(p.jsxs)("h1",{children:[e.name," "]}),Object(p.jsx)("p",{className:"",children:e.email}),Object(p.jsx)("p",{children:e.department}),Object(p.jsx)("p",{children:e.faculty}),Object(p.jsx)("p",{children:e.gender}),Object(p.jsx)("p",{children:e.username}),Object(p.jsx)("p",{children:"Developer"}),Object(p.jsx)("div",{children:Object(p.jsx)("a",{href:"/sign-in",children:"Logout"})})]})]},t)}))})}}]),a}(s.a.Component),f=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!0}))},n.hideModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!1}))},n.state={show:!1,currentuser:[],longindetails:{username:"",password:""}},n.getCurentUser=n.getCurentUser.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.refreshToken=n.refreshToken.bind(Object(m.a)(n)),n.after5minutes=n.after5minutes.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCurentUser()}},{key:"after5minutes",value:function(){setInterval((function(){console.log("after")}),5e3)}},{key:"refreshToken",value:function(){var e=this;fetch("https://testingmyapis.herokuapp.com/api/token/refresh/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({refresh:localStorage.getItem("refresh_token")})}).then((function(e){return e.json()})).then((function(t){t.access?(localStorage.setItem("access_token",t.access),localStorage.setItem("refresh_token",t.refresh),e.showSuccess(),e.getCurentUser()):t.detail&&(localStorage.setItem("access_token",""),localStorage.setItem("refresh_token",""),e.showModal())})).catch((function(e){}))}},{key:"getCurentUser",value:function(){var e=this;fetch("https://testingmyapis.herokuapp.com/api/active/user/",{method:"GET",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"JWT "+localStorage.getItem("access_token")}}).then((function(e){return e.json()})).then((function(t){"token_not_valid"===t.code?e.showModal():e.setState({currentuser:t})})).catch((function(e){}))}},{key:"handleChange",value:function(e){this.setState({longindetails:Object(b.a)(Object(b.a)({},this.state.longindetails),{},Object(u.a)({},e.target.name,e.target.value))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("https://testingmyapis.herokuapp.com/api/token/obtain/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(this.state.longindetails)}).then((function(e){return e.json()})).then((function(e){e.access?(localStorage.setItem("access_token",e.access),localStorage.setItem("refresh_token",e.refresh),t.hideModal(),t.getCurentUser(),window.location.reload()):e.detail&&(localStorage.setItem("access_token",""),localStorage.setItem("refresh_token",""),t.showModal())})).catch((function(e){}))}},{key:"handlesignout",value:function(){fetch("https://testingmyapis.herokuapp.com/api/user/logout/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},body:JSON.stringify({refresh:localStorage.getItem("refresh_token")})}).then((function(e){return e.json()})).then((function(e){console.log("Data :",e),localStorage.setItem("access_token",""),localStorage.setItem("refresh_token","")}))}},{key:"render",value:function(){return Object(p.jsxs)(d.a,{children:[Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(d.b,{className:"navbar-brand",to:"/sign-in",children:"positronX.io"}),Object(p.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02",children:Object(p.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(p.jsx)("li",{className:"nav-item"}),Object(p.jsx)("li",{className:"nav-item"})]})})]})})}),Object(p.jsxs)("div",{children:[Object(p.jsxs)(O,{show:this.state.show,handleClose:this.hideModal,children:["Session closed",Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("h3",{children:"Sign In"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Username"}),Object(p.jsx)("input",{type:"text",name:"username",value:this.state.longindetails.username,onChange:this.handleChange,className:"form-control",placeholder:"Enter username"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",name:"password",value:this.state.longindetails.password,onChange:this.handleChange,className:"form-control",placeholder:"Enter password"})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("div",{className:"custom-control custom-checkbox",children:Object(p.jsx)("br",{})})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"}),Object(p.jsxs)("p",{className:"forgot-password text-right",children:["Forgot ",Object(p.jsx)("a",{href:"#",children:"password?"})]}),Object(p.jsxs)("p",{className:"create-account text-right",children:["Click to ",Object(p.jsx)(d.b,{to:"/sign-up",children:"Create an Account"})]})]}),Object(p.jsx)("br",{})]}),Object(p.jsx)("div",{className:"auth-wrapper",children:Object(p.jsx)("div",{className:"auth-inner",children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/dash",component:g}),Object(p.jsx)(j.b,{path:"/profile",component:g})]})})})]})]})}}]),a}(s.a.Component),x=a(34),v=a.n(x),y=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!0}))},n.hideModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!1}))},n.state={show:!1,dept:[],user:{email:"",username:"",firstname:"",surname:"",othername:"",department:null,password:"",gender:"",image:null}},n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleFileInput=n.handleFileInput.bind(Object(m.a)(n)),n.alldepartments=n.alldepartments.bind(Object(m.a)(n)),n.showModal=n.showModal.bind(Object(m.a)(n)),n.hideModal=n.hideModal.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.alldepartments()}},{key:"alldepartments",value:function(){var e=this;fetch("https://testingmyapis.herokuapp.com/api/departments/").then((function(e){return e.json()})).then((function(t){e.setState({dept:t})}))}},{key:"handleChange",value:function(e){this.setState({user:Object(b.a)(Object(b.a)({},this.state.user),{},Object(u.a)({},e.target.name,e.target.value))})}},{key:"handleFileInput",value:function(e){this.setState({user:Object(b.a)(Object(b.a)({},this.state.user),{},Object(u.a)({},e.target.name,e.target.value))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=document.querySelector('input[type="file"]').files[0],n=new FormData;n.append("image",a),n.append("email",this.state.user.email),n.append("username",this.state.user.username),n.append("firstname",this.state.user.firstname),n.append("surname",this.state.user.surname),n.append("othername",this.state.user.othername),n.append("department",this.state.user.department),n.append("password",this.state.user.password),n.append("gender",this.state.user.gender),n.append("image",a);v.a.post("https://testingmyapis.herokuapp.com/api/save-user/",n,{headers:{"content-type":"multipart/form-data",accept:"application/json"}}).then((function(e){t.showModal()})).catch((function(e){return console.log("ERROR :",e)}))}},{key:"render",value:function(){var e=this.state.dept;return Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("h3",{children:"Sign Up"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"First name"}),Object(p.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.user.firstname,name:"firstname",className:"form-control",placeholder:"First name",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Surname"}),Object(p.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.user.surname,name:"surname",className:"form-control",placeholder:"surname",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Othernames"}),Object(p.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.user.othername,name:"othername",className:"form-control",placeholder:"Othername"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Username"}),Object(p.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.user.username,name:"username",className:"form-control",placeholder:"username",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Email address"}),Object(p.jsx)("input",{type:"email",onChange:this.handleChange,value:this.state.user.email,name:"email",className:"form-control",placeholder:"Enter email",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Gender"}),Object(p.jsxs)("select",{className:"form-control",onChange:this.handleChange,value:this.state.user.gender,name:"gender",children:[Object(p.jsx)("option",{children:" --Select gender--"}),Object(p.jsx)("option",{value:"male",children:"Male"}),Object(p.jsx)("option",{value:"female",children:"Female"}),Object(p.jsx)("option",{value:"other",children:"Other"})]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Department"}),Object(p.jsxs)("select",{className:"form-control deptSelect",onChange:this.handleChange,value:this.state.user.department,name:"department",required:!0,children:[Object(p.jsx)("option",{children:" --Select department-- "}),e.map((function(e,t){return Object(p.jsx)("option",{value:e.dept_id,children:e.dept_name},e.dept_id)}))]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Upload profile picture"}),Object(p.jsx)("input",{type:"file",name:"userimage",onChange:this.handleFileInput,value:this.state.user.image,className:"form-control"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",onChange:this.handleChange,value:this.state.user.password,name:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),Object(p.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(p.jsx)(d.b,{to:"/sign-in",children:"sign in?"})]}),Object(p.jsxs)(O,{show:this.state.show,handleClose:this.hideModal,children:[Object(p.jsx)("p",{children:"Modal"}),Object(p.jsx)(d.b,{to:"/sign-in",children:"Ok"})]})]})}}]),a}(s.a.Component),k=function(e){e.handleClose;var t=e.show,a=e.children,n=t?"modal display-block":"modal display-none";return Object(p.jsx)("div",{className:n,children:Object(p.jsx)("section",{className:"modal-main",children:a})})},S=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).showSuccess=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.success),{},{success:!0}))},n.showModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!0}))},n.hideModal=function(){n.setState(Object(b.a)(Object(b.a)({},n.state.show),{},{show:!1}))},n.state={longindetails:{username:"",password:""},show:!1,success:!1},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handlesignout=n.handlesignout.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handlesignout()}},{key:"handleChange",value:function(e){this.setState({longindetails:Object(b.a)(Object(b.a)({},this.state.longindetails),{},Object(u.a)({},e.target.name,e.target.value))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("https://testingmyapis.herokuapp.com/api/token/obtain/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(this.state.longindetails)}).then((function(e){return e.json()})).then((function(e){e.access?(localStorage.setItem("access_token",e.access),localStorage.setItem("refresh_token",e.refresh),t.showSuccess()):e.detail&&(localStorage.setItem("access_token",""),localStorage.setItem("refresh_token",""),t.showModal())})).catch((function(e){}))}},{key:"handlesignout",value:function(){fetch("https://testingmyapis.herokuapp.com/api/user/logout/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",accept:"application/json",Authorization:"JWT "+localStorage.getItem("access_token")},body:JSON.stringify({refresh:localStorage.getItem("refresh_token")})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("access_token",""),localStorage.setItem("refresh_token","")}))}},{key:"render",value:function(){return Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("h3",{children:"Sign In"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Username"}),Object(p.jsx)("input",{type:"text",name:"username",value:this.state.longindetails.username,onChange:this.handleChange,className:"form-control",placeholder:"Enter username"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",{type:"password",name:"password",value:this.state.longindetails.password,onChange:this.handleChange,className:"form-control",placeholder:"Enter password"})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(p.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(p.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"}),Object(p.jsxs)("p",{className:"forgot-password text-right",children:["Forgot ",Object(p.jsx)("a",{href:"#",children:"password?"})]}),Object(p.jsxs)("p",{className:"create-account text-right",children:["Click to ",Object(p.jsx)(d.b,{to:"/sign-up",children:"Create an Account"})]}),Object(p.jsxs)(O,{show:this.state.show,handleClose:this.hideModal,children:[Object(p.jsx)("p",{children:"Modal"}),"No active account found with the given credentials",Object(p.jsx)("button",{type:"button",className:"btn btn-danger btn-block",onClick:this.hideModal,children:"Retry"})]}),Object(p.jsxs)(k,{show:this.state.success,children:["Successfully logged in",Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"/dash",children:"Ok"})]})]})}}]),a}(s.a.Component),w=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsxs)(d.a,{children:[Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(d.b,{className:"navbar-brand",to:"/sign-in",children:"positronX.io"}),Object(p.jsx)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02",children:Object(p.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(d.b,{className:"nav-link",to:"/sign-in",children:"Login"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(d.b,{className:"nav-link",to:"/sign-up",children:"Sign up"})})]})})]})})}),Object(p.jsx)("div",{className:"auth-wrapper",children:Object(p.jsx)("div",{className:"auth-inner",children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",component:S}),Object(p.jsx)(j.b,{path:"/sign-in",component:S}),Object(p.jsx)(j.b,{path:"/sign-up",component:y})]})})})]})}}]),a}(s.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)(d.a,{children:Object(p.jsxs)("div",{children:[" ",Object(p.jsxs)("div",{children:[" ",Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/dash",component:f}),Object(p.jsx)(j.b,{path:"/",component:w})]})]})]})})}}]),a}(s.a.Component),C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,66)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),c(e),o(e)}))};o.a.render(Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{path:"/",component:N}),Object(p.jsx)(j.a,{from:"/",to:"/dash"}),Object(p.jsx)(j.b,{path:"/dash",component:f}),Object(p.jsx)(j.b,{path:"/dash/profile",component:g})]})}),document.getElementById("root")),C()}},[[65,1,2]]]);
//# sourceMappingURL=main.6a980a6a.chunk.js.map